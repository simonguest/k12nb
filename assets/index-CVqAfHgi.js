import{r as E,f,M as m,N as i,O as d,m as u,P as $,Q as _,u as p,K as v,H as x,R,S as g,F as B,b as T,w as V,U as z,V as L,W as A,X as M}from"./@vue-BZK5WcBs.js";import{V as N,a as w,b as P,c as k,d as j,e as C,f as S,g as W,h as U,i as I,j as F,m as H,k as q}from"./vuetify-B4TSYPQA.js";import{v as D}from"./uuid-C6aID195.js";import{m as G}from"./marked-DK8KC6kv.js";import{z as y,E as J,A as K}from"./@codemirror-C6laWxD4.js";import{b as Q}from"./codemirror-DTUGriku.js";import"./@lezer-BrmOjncj.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const c=E({content:{},findCell(r){return this.content.cells?this.content.cells.find(t=>t.id===r):null},getSource(r){const t=this.findCell(r);return t?t.source:null},setSource(r,t){const e=this.findCell(r);e&&(t=t.map(n=>n+`
`),e.source=t)},clearOutputs(r){const t=this.findCell(r);t&&(t.outputs=[])},getOutputTypes(r){var n,o,s;let t=[];const e=this.findCell(r);return e&&(((n=e.outputs)==null?void 0:n.findIndex(a=>a.output_type==="execute_result"))!==-1&&t.push("result"),((o=e.outputs)==null?void 0:o.findIndex(a=>a.output_type==="stream"&&a.name==="stdout"))!==-1&&t.push("stdout"),((s=e.outputs)==null?void 0:s.findIndex(a=>a.output_type==="error"))!==-1&&t.push("error")),t},addStdout(r,t){const e=this.findCell(r);if(e){e.outputs||(e.outputs=[]);const n=e.outputs.findIndex(o=>o.output_type==="stream"&&o.name==="stdout");n!==-1?(e.outputs[n].text||(e.outputs[n].text=[]),e.outputs[n].text.push(t)):e.outputs.push({output_type:"stream",name:"stdout",text:[t]})}},getStdout(r){var n;let t="";const e=this.findCell(r);return e&&((n=e.outputs)==null||n.forEach(o=>{var s;o.output_type==="stream"&&(t+=((s=o.text)==null?void 0:s.join(""))||"")})),t},setResult(r,t){const e=this.findCell(r);if(e){e.outputs||(e.outputs=[]);const n=e.outputs.findIndex(o=>o.output_type==="execute_result");if(n!==-1){const o=e.outputs[n].data||{};e.outputs[n].data={...o,...t}}else e.outputs.push({output_type:"execute_result",data:t})}},getResult(r){var n;let t={};const e=this.findCell(r);return e&&((n=e.outputs)==null||n.forEach(o=>{o.output_type==="execute_result"&&o.data&&(t=o.data)})),t},setError(r,t){const e=this.findCell(r);if(e){e.outputs||(e.outputs=[]);const n=Array.isArray(t)?t:t.split(`
`);e.outputs.push({output_type:"error",traceback:n})}},getError(r){var n;let t="";const e=this.findCell(r);return e&&((n=e.outputs)==null||n.forEach(o=>{var s;o.output_type==="error"&&(t+=((s=o.traceback)==null?void 0:s.join(""))||"")})),t},loadNotebook(r){r.cells&&(r.cells.forEach(t=>{(!t.id||typeof t.id!="string"||t.id.trim()==="")&&(t.id=D())}),this.content=r)}}),X=["innerHTML"],Y=f({__name:"MarkdownCell",props:{source:{}},setup(r){const t=e=>e?G.parse(e.join("")):"";return(e,n)=>(i(),m(N,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:d(()=>[u(w,null,{default:d(()=>[$("div",{innerHTML:t(e.source)},null,8,X)]),_:1})]),_:1}))}}),l=E({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,setInterruptBuffer(r){this.interruptBuffer=r},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(r){this.workerStatus=r},executeCell(r){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=r,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"}}),Z=f({__name:"CodeControls",props:{id:{}},setup(r){const t=r,e=()=>{c.clearOutputs(t.id),l.executeCell(t.id)},n=()=>{c.clearOutputs(t.id)},o=()=>{l.interruptExecution()};return(s,a)=>(i(),_("div",null,[$("div",null,[u(P,{rounded:"lg"},{default:d(()=>[u(k,{size:"32",icon:"mdi-play-outline",onClick:e,disabled:p(l).executionStatus!=="idle"||p(l).workerStatus!=="ready",loading:p(l).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),u(k,{size:"32",icon:"mdi-stop",onClick:o,disabled:p(l).executionStatus==="idle"||p(l).runningCellId!==s.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),u(P,{rounded:"lg",class:"pl-4"},{default:d(()=>[u(k,{size:"32",icon:"mdi-broom",onClick:n})]),_:1})])]))}}),ee=y.theme({"&":{fontSize:"10.5pt",border:"0px",borderRadius:"5px",background:"#ffffff"},".cm-content":{fontFamily:"JetBrainsMono, monospace",minHeight:"100px"},".cm-gutters":{minHeight:"100px"},".cm-scroller":{overflow:"auto",maxHeight:"600px"}}),te=["id"],oe=f({__name:"CodeEditor",props:{source:{},id:{}},setup(r){const t=r;return v(()=>{var n;const e=J.create({doc:(n=t.source)==null?void 0:n.join(""),extensions:[Q,K(),ee,y.lineWrapping,y.updateListener.of(o=>{if(o.docChanged){const s=o.state.doc.toString();c.setSource(t.id,s.includes(`
`)?s.split(`
`):[s])}})]});new y({state:e,parent:document.getElementById("code-editor-"+t.id)})}),(e,n)=>(i(),_("div",{id:`code-editor-${t.id}`},null,8,te))}}),re={class:"output-console",readonly:""},ne=f({__name:"Console",props:{stdout:{}},setup(r){return(t,e)=>(i(),_("textarea",re,x(t.stdout),1))}}),b=(r,t)=>{const e=r.__vccOpts||r;for(const[n,o]of t)e[n]=o;return e},se=b(ne,[["__scopeId","data-v-31a04b90"]]),ue={class:"output-console",readonly:""},le=f({__name:"Error",props:{stderr:{}},setup(r){return(t,e)=>(i(),_("textarea",ue,x(t.stderr),1))}}),ie=b(le,[["__scopeId","data-v-21ca1749"]]),ae={class:"output-console",readonly:""},de=f({__name:"TextPlain",props:{value:{}},setup(r){return(t,e)=>(i(),_("textarea",ae,x(Array.isArray(t.value)?t.value.join(""):t.value),1))}}),ce=b(de,[["__scopeId","data-v-8ff1bdc7"]]),pe=["src"],fe=f({__name:"ImagePng",props:{value:{}},setup(r){return(t,e)=>(i(),_("img",{src:`data:image/png;base64,${t.value}`},null,8,pe))}}),me=["src"],_e=f({__name:"ImageSvg",props:{value:{}},setup(r){return(t,e)=>(i(),_("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t.value)}`},null,8,me))}}),ge=f({__name:"Result",props:{value:{}},setup(r){const t=r;return(e,n)=>(i(),_(B,null,[R(x(console.log(t.value))+" ",1),e.value["image/svg+xml"]?(i(),m(_e,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):g("",!0),e.value["image/png"]?(i(),m(fe,{key:1,value:e.value["image/png"]},null,8,["value"])):g("",!0),e.value["text/plain"]?(i(),m(ce,{key:2,value:e.value["text/plain"]},null,8,["value"])):g("",!0)],64))}}),he=b(ge,[["__scopeId","data-v-2229fbd6"]]),ye=f({__name:"CodeCell",props:{cell:{}},setup(r){const t=r;let e=[];e=c.getOutputTypes(t.cell.id);const n=()=>{if(e.indexOf("result")!==-1)return"result";if(e.indexOf("stdout")!==-1)return"stdout";if(e.indexOf("error")!==-1)return"error"},o=T("result");return V(()=>t.cell.outputs,()=>{e=c.getOutputTypes(t.cell.id),o.value="none",o.value=n()||o.value},{deep:!0}),(s,a)=>(i(),m(N,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:d(()=>[u(w,null,{default:d(()=>[u(oe,{source:s.cell.source,id:s.cell.id},null,8,["source","id"])]),_:1}),u(W,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:d(()=>[u(Z,{id:s.cell.id},null,8,["id"]),u(j,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=h=>o.value=h),class:"ml-auto"},{default:d(()=>[p(e).indexOf("result")!==-1?(i(),m(C,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:d(()=>[u(S,{icon:"mdi-monitor"})]),_:1})):g("",!0),p(e).indexOf("stdout")!==-1?(i(),m(C,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[u(S,{icon:"mdi-console"})]),_:1})):g("",!0),p(e).indexOf("error")!==-1?(i(),m(C,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[u(S,{icon:"mdi-alert-circle-outline"})]),_:1})):g("",!0)]),_:1},8,["modelValue"])]),_:1}),u(w,null,{default:d(()=>[u(U,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=h=>o.value=h),direction:"vertical"},{default:d(()=>[u(I,{value:"result"},{default:d(()=>[u(he,{value:p(c).getResult(s.cell.id)},null,8,["value"])]),_:1}),u(I,{value:"stdout",direction:"vertical"},{default:d(()=>[u(se,{stdout:p(c).getStdout(s.cell.id)},null,8,["stdout"])]),_:1}),u(I,{value:"error",direction:"vertical"},{default:d(()=>[u(ie,{stderr:p(c).getError(s.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),ve=f({__name:"PyodideProvider",props:{notebookId:{}},setup(r){const t=r;let e;return v(async()=>{console.log("PyodideProvider: Starting new worker for "+t.notebookId),e=new Worker(new URL(""+new URL("PyodideWorker-55qqGFRg.js",import.meta.url).href,import.meta.url),{type:"module"}),e.postMessage({type:"initialize"}),e.onmessage=async n=>{const{type:o,text:s,result:a,error:h,interruptBuffer:O}=n.data;switch(o){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),l.setWorkerStatus("ready"),O&&(l.setInterruptBuffer(new Int32Array(O)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":l.runningCellId&&c.addStdout(l.runningCellId,s);break;case"execute_result":l.runningCellId&&a&&c.setResult(l.runningCellId,a);break;case"execute_completed":l.executionCompleted();break;case"error":l.runningCellId&&c.setError(l.runningCellId,h),l.executionCompleted()}}}),z(async()=>{console.log("PyodideProvider: Terminating worker."),l.setWorkerStatus("terminating"),e.terminate()}),V(()=>l.executionStatus,n=>{if(n==="queued"&&l.runningCellId!=null){const o=c.getSource(l.runningCellId);e.postMessage({type:"run",cellId:l.runningCellId,code:o==null?void 0:o.join("")})}}),(n,o)=>L(n.$slots,"default")}}),xe={class:"renderer-container"},be=f({__name:"Renderer",props:{id:{},initialNotebook:{}},setup(r){const t=r;return v(()=>{c.loadNotebook(t.initialNotebook)}),V(()=>t.initialNotebook,e=>{c.loadNotebook(e)}),(e,n)=>(i(),m(ve,{notebookId:e.id},{default:d(()=>[$("div",xe,[(i(!0),_(B,null,A(p(c).content.cells,o=>(i(),_("div",null,[o.cell_type==="markdown"?(i(),m(p(Y),{key:0,source:o.source},null,8,["source"])):g("",!0),o.cell_type==="code"?(i(),m(p(ye),{key:1,cell:o},null,8,["cell"])):g("",!0)]))),256))])]),_:1},8,["notebookId"]))}}),ke="test",Ce=f({__name:"App",setup(r){const t=T(null);return v(async()=>{try{const e=new URLSearchParams(window.location.search),n=e.has("sample")?e.get("sample"):"hello_world.ipynb",s=await(await fetch(`/samples/${n}`)).text();t.value=JSON.parse(s),console.log(`Notebook ${n} loaded`)}catch(e){console.error("Error loading notebook:",e)}}),(e,n)=>t.value?(i(),m(be,{key:0,"initial-notebook":t.value,id:ke},null,8,["initial-notebook"])):g("",!0)}}),Se=F({icons:{defaultSet:"mdi",aliases:q,sets:{mdi:H}},theme:{defaultTheme:"light"}});M(Ce).use(Se).mount("#app");
