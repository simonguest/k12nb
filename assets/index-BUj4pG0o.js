import{r as H,f,M as g,N as u,O as d,m as i,P as q,Q as _,u as p,K as T,R as b,H as K,F as me,b as ge,w as G,S as Ce,U as ve,V as xe,W as Se}from"./@vue-CuCZ4c_x.js";import{V as fe,a as U,b as Y,c as P,d as we,e as E,f as L,g as Be,h as $e,i as V,u as Ie,j as Z,k as ee,l as Ne,m as Te,n as Pe}from"./vuetify-BbVJR0j3.js";import{v as Ee}from"./uuid-C6aID195.js";import{m as Le}from"./marked-DK8KC6kv.js";import{z as w,H as be,s as he,E as Ve,A as Oe}from"./@codemirror-8urbkqeF.js";import{b as Me}from"./codemirror-B6RBFOHf.js";import{c as e}from"./@lezer-BrmOjncj.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}})();const x=H({theme:"dark",locale:"en-US",setTheme(a){this.theme=a},setLocale(a){this.locale=a}}),m=H({content:{},findCell(a){return this.content.cells?this.content.cells.find(t=>t.id===a):null},getSource(a){const t=this.findCell(a);return t?t.source:null},setSource(a,t){const o=this.findCell(a);o&&(t=t.map(n=>n+`
`),o.source=t)},clearOutputs(a){const t=this.findCell(a);t&&(t.outputs=[])},getOutputTypes(a){var n,r,l;let t=[];const o=this.findCell(a);return o&&(((n=o.outputs)==null?void 0:n.findIndex(s=>s.output_type==="execute_result"))!==-1&&t.push("result"),((r=o.outputs)==null?void 0:r.findIndex(s=>s.output_type==="stream"&&s.name==="stdout"))!==-1&&t.push("stdout"),((l=o.outputs)==null?void 0:l.findIndex(s=>s.output_type==="error"))!==-1&&t.push("error")),t},addStdout(a,t){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const n=o.outputs.findIndex(r=>r.output_type==="stream"&&r.name==="stdout");n!==-1?(o.outputs[n].text||(o.outputs[n].text=[]),o.outputs[n].text.push(t)):o.outputs.push({output_type:"stream",name:"stdout",text:[t]})}},getStdout(a){var n;let t="";const o=this.findCell(a);return o&&((n=o.outputs)==null||n.forEach(r=>{var l;r.output_type==="stream"&&(t+=((l=r.text)==null?void 0:l.join(""))||"")})),t},setResult(a,t){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const n=o.outputs.findIndex(r=>r.output_type==="execute_result");if(n!==-1){const r=o.outputs[n].data||{};o.outputs[n].data={...r,...t}}else o.outputs.push({output_type:"execute_result",data:t})}},getResult(a){var n;let t={};const o=this.findCell(a);return o&&((n=o.outputs)==null||n.forEach(r=>{r.output_type==="execute_result"&&r.data&&(t=r.data)})),t},setError(a,t){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const n=Array.isArray(t)?t:t.split(`
`);o.outputs.push({output_type:"error",traceback:n})}},getError(a){var n;let t="";const o=this.findCell(a);return o&&((n=o.outputs)==null||n.forEach(r=>{var l;r.output_type==="error"&&(t+=((l=r.traceback)==null?void 0:l.join(""))||"")})),t},loadNotebook(a){a.cells&&(a.cells.forEach(t=>{(!t.id||typeof t.id!="string"||t.id.trim()==="")&&(t.id=Ee())}),this.content=a)}}),We=["innerHTML"],Re=f({__name:"MarkdownCell",props:{metadata:{},source:{}},setup(a){const t=n=>n?Le.parse(n.join("")):"",o=(n,r)=>r.i18n&&r.i18n[x.locale]?r.i18n[x.locale]:n;return(n,r)=>(u(),g(fe,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:d(()=>[i(U,null,{default:d(()=>[q("div",{innerHTML:t(o(n.source,n.metadata))},null,8,We)]),_:1})]),_:1}))}}),c=H({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",setInterruptBuffer(a){this.interruptBuffer=a},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(a){this.workerStatus=a},executeCell(a){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=a,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(a){this.workerStatus="error",this.fatalErrorTrace=a}}),Ae=f({__name:"CodeControls",props:{id:{}},setup(a){const t=a,o=()=>{m.clearOutputs(t.id),c.executeCell(t.id)},n=()=>{m.clearOutputs(t.id)},r=()=>{c.interruptExecution()};return(l,s)=>(u(),_("div",null,[q("div",null,[i(Y,{rounded:"lg"},{default:d(()=>[i(P,{size:"32",icon:"mdi-play-outline",onClick:o,disabled:p(c).executionStatus!=="idle"||p(c).workerStatus!=="ready",loading:p(c).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),i(P,{size:"32",icon:"mdi-stop",onClick:r,disabled:p(c).executionStatus==="idle"||p(c).runningCellId!==l.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),i(Y,{rounded:"lg",class:"pl-4"},{default:d(()=>[i(P,{size:"32",icon:"mdi-broom",onClick:n})]),_:1})])]))}}),te="#2e3440",_e="#3b4252",oe="#434c5e",B="#4c566a",D="#e5e9f0",F="#eceff4",O="#8fbcbb",re="#88c0d0",ze="#81a1c1",h="#5e81ac",Ue="#bf616a",C="#d08770",M="#ebcb8b",ae="#a3be8c",De="#b48ead",ne="#d30102",J=F,W=J,Fe="#ffffff",R=D,je=J,le=_e,He=w.theme({"&":{color:te,backgroundColor:Fe},".cm-content":{caretColor:le,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:le},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:je},".cm-panels":{backgroundColor:J,color:B},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${B}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:D},".cm-activeLine":{backgroundColor:W},".cm-selectionMatch":{backgroundColor:D},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${B}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:F},".cm-gutters":{backgroundColor:F,color:te,border:"none"},".cm-activeLineGutter":{backgroundColor:W},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:R},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:R,borderBottomColor:R},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:W,color:B}}},{dark:!1}),qe=be.define([{tag:e.keyword,color:h},{tag:[e.name,e.deleted,e.character,e.propertyName,e.macroName],color:C},{tag:[e.variableName],color:C},{tag:[e.function(e.variableName)],color:h},{tag:[e.labelName],color:ze},{tag:[e.color,e.constant(e.name),e.standard(e.name)],color:h},{tag:[e.definition(e.name),e.separator],color:ae},{tag:[e.brace],color:O},{tag:[e.annotation],color:ne},{tag:[e.number,e.changed,e.annotation,e.modifier,e.self,e.namespace],color:re},{tag:[e.typeName,e.className],color:M},{tag:[e.operator,e.operatorKeyword],color:ae},{tag:[e.tagName],color:De},{tag:[e.squareBracket],color:Ue},{tag:[e.angleBracket],color:C},{tag:[e.attributeName],color:M},{tag:[e.regexp],color:h},{tag:[e.quote],color:_e},{tag:[e.string],color:C},{tag:e.link,color:O,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[e.url,e.escape,e.special(e.string)],color:C},{tag:[e.meta],color:re},{tag:[e.comment],color:oe,fontStyle:"italic"},{tag:e.strong,fontWeight:"bold",color:h},{tag:e.emphasis,fontStyle:"italic",color:h},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.heading,fontWeight:"bold",color:h},{tag:e.special(e.heading1),fontWeight:"bold",color:h},{tag:e.heading1,fontWeight:"bold",color:h},{tag:[e.heading2,e.heading3,e.heading4],fontWeight:"bold",color:h},{tag:[e.heading5,e.heading6],color:h},{tag:[e.atom,e.bool,e.special(e.variableName)],color:C},{tag:[e.processingInstruction,e.inserted],color:O},{tag:[e.contentSeparator],color:M},{tag:e.invalid,color:oe,borderBottom:`1px dotted ${ne}`}]),Ke=[He,he(qe)],ke="#2e3235",ye="#505d64",j="#606f7a",N="#707d8b",Ge="#a0a4ae",I="#bdbdbd",Je="#e0e0e0",Qe="#fdf6e3",v="#ff5f52",Xe="#ff6e40",Ye="#fa5788",k="#facf4e",se="#ffad42",S="#56c8d8",Ze="#7186f0",A="#cf6edf",et="#6abf69",ce="#99d066",ie="#4ebaaa",ue=v,de="#202325",$="#414b46",tt=ke,z=ye,ot=ye,pe=Ge,rt=w.theme({"&":{color:I,backgroundColor:tt},".cm-content":{caretColor:pe,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:pe},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ot},".cm-panels":{backgroundColor:de,color:N},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${k}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:$},".cm-activeLine":{backgroundColor:$},".cm-selectionMatch":{backgroundColor:de,outline:`1px solid ${ie}`},"&.cm-focused .cm-matchingBracket":{color:Je,outline:`1px solid ${ie}`},"&.cm-focused .cm-nonmatchingBracket":{color:v},".cm-gutters":{backgroundColor:ke,borderRight:"1px solid #4f5b66",color:j},".cm-activeLineGutter":{backgroundColor:$,color:Qe},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:z},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:z,borderBottomColor:z},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:$,color:N}}},{dark:!0}),at=be.define([{tag:e.keyword,color:A},{tag:[e.name,e.deleted,e.character,e.macroName],color:S},{tag:[e.propertyName],color:k},{tag:[e.variableName],color:I},{tag:[e.function(e.variableName)],color:S},{tag:[e.labelName],color:A},{tag:[e.color,e.constant(e.name),e.standard(e.name)],color:k},{tag:[e.definition(e.name),e.separator],color:Ye},{tag:[e.brace],color:A},{tag:[e.annotation],color:ue},{tag:[e.number,e.changed,e.annotation,e.modifier,e.self,e.namespace],color:se},{tag:[e.typeName,e.className],color:se},{tag:[e.operator,e.operatorKeyword],color:Ze},{tag:[e.tagName],color:Xe},{tag:[e.squareBracket],color:v},{tag:[e.angleBracket],color:j},{tag:[e.attributeName],color:I},{tag:[e.regexp],color:ue},{tag:[e.quote],color:et},{tag:[e.string],color:ce},{tag:e.link,color:S,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[e.url,e.escape,e.special(e.string)],color:k},{tag:[e.meta],color:N},{tag:[e.comment],color:N,fontStyle:"italic"},{tag:e.monospace,color:I},{tag:e.strong,fontWeight:"bold",color:v},{tag:e.emphasis,fontStyle:"italic",color:ce},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.heading,fontWeight:"bold",color:k},{tag:e.heading1,fontWeight:"bold",color:k},{tag:[e.heading2,e.heading3,e.heading4],fontWeight:"bold",color:k},{tag:[e.heading5,e.heading6],color:k},{tag:[e.atom,e.bool,e.special(e.variableName)],color:S},{tag:[e.processingInstruction,e.inserted],color:v},{tag:[e.contentSeparator],color:S},{tag:e.invalid,color:j,borderBottom:`1px dotted ${v}`}]),nt=[rt,he(at)],lt=["id"],st=f({__name:"CodeEditor",props:{source:{},id:{}},setup(a){const t=a;return T(()=>{var r;let o=Ke;switch(x.theme){case"dark":o=nt;break}const n=Ve.create({doc:(r=t.source)==null?void 0:r.join(""),extensions:[Me,Oe(),o,w.lineWrapping,w.updateListener.of(l=>{if(l.docChanged){const s=l.state.doc.toString();m.setSource(t.id,s.includes(`
`)?s.split(`
`):[s])}})]});new w({state:n,parent:document.getElementById("code-editor-"+t.id)})}),(o,n)=>(u(),_("div",{id:`code-editor-${t.id}`},null,8,lt))}}),ct={key:0,class:"output-console",readonly:""},it=f({__name:"Console",props:{stdout:{}},setup(a){return(t,o)=>t.stdout?(u(),_("textarea",ct,K(t.stdout),1)):b("",!0)}}),Q=(a,t)=>{const o=a.__vccOpts||a;for(const[n,r]of t)o[n]=r;return o},ut=Q(it,[["__scopeId","data-v-d2c2f4ad"]]),dt={class:"output-console",readonly:""},pt=f({__name:"Error",props:{stderr:{}},setup(a){return(t,o)=>(u(),_("textarea",dt,K(t.stderr),1))}}),mt=Q(pt,[["__scopeId","data-v-21ca1749"]]),gt={class:"output-console",readonly:""},ft=f({__name:"TextPlain",props:{value:{}},setup(a){return(t,o)=>(u(),_("textarea",gt,K(Array.isArray(t.value)?t.value.join(""):t.value),1))}}),bt=Q(ft,[["__scopeId","data-v-cb10ff75"]]),ht=["src"],_t=f({__name:"ImagePng",props:{value:{}},setup(a){return(t,o)=>(u(),_("img",{src:`data:image/png;base64,${t.value}`},null,8,ht))}}),kt=["src"],yt=f({__name:"ImageSvg",props:{value:{}},setup(a){return(t,o)=>(u(),_("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t.value)}`},null,8,kt))}}),Ct=f({__name:"Result",props:{value:{}},setup(a){return(t,o)=>(u(),_(me,null,[t.value["image/svg+xml"]?(u(),g(yt,{key:0,value:t.value["image/svg+xml"]},null,8,["value"])):b("",!0),t.value["image/png"]?(u(),g(_t,{key:1,value:t.value["image/png"]},null,8,["value"])):b("",!0),t.value["text/plain"]?(u(),g(bt,{key:2,value:t.value["text/plain"]},null,8,["value"])):b("",!0)],64))}}),vt=f({__name:"CodeCell",props:{cell:{}},setup(a){const t=a;let o=[];o=m.getOutputTypes(t.cell.id);const n=()=>{if(o.indexOf("result")!==-1)return"result";if(o.indexOf("stdout")!==-1)return"stdout";if(o.indexOf("error")!==-1)return"error"},r=ge("result");return G(()=>t.cell.outputs,()=>{o=m.getOutputTypes(t.cell.id),r.value="none",r.value=n()||r.value},{deep:!0}),(l,s)=>(u(),g(fe,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:d(()=>[i(U,null,{default:d(()=>[i(st,{source:l.cell.source,id:l.cell.id},null,8,["source","id"])]),_:1}),i(Be,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:d(()=>[i(Ae,{id:l.cell.id},null,8,["id"]),i(we,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=y=>r.value=y),class:"ml-auto"},{default:d(()=>[p(o).indexOf("result")!==-1?(u(),g(E,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:d(()=>[i(L,{icon:"mdi-monitor"})]),_:1})):b("",!0),p(o).indexOf("stdout")!==-1?(u(),g(E,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(L,{icon:"mdi-console"})]),_:1})):b("",!0),p(o).indexOf("error")!==-1?(u(),g(E,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(L,{icon:"mdi-alert-circle-outline"})]),_:1})):b("",!0)]),_:1},8,["modelValue"])]),_:1}),i(U,null,{default:d(()=>[i($e,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=y=>r.value=y),direction:"vertical"},{default:d(()=>[i(V,{value:"result"},{default:d(()=>[i(Ct,{value:p(m).getResult(l.cell.id)},null,8,["value"])]),_:1}),i(V,{value:"stdout",direction:"vertical"},{default:d(()=>[i(ut,{stdout:p(m).getStdout(l.cell.id)},null,8,["stdout"])]),_:1}),i(V,{value:"error",direction:"vertical"},{default:d(()=>[i(mt,{stderr:p(m).getError(l.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),xt=f({__name:"PyodideProvider",props:{notebookId:{}},setup(a){const t=a;let o;return T(async()=>{console.log("PyodideProvider: Starting new worker for "+t.notebookId),o=new Worker(new URL(""+new URL("PyodideWorker-CcsMhKFv.js",import.meta.url).href,import.meta.url),{type:"module"}),o.postMessage({type:"initialize"}),o.onmessage=async n=>{const{type:r,text:l,result:s,error:y,interruptBuffer:X}=n.data;switch(r){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),c.setWorkerStatus("ready"),X&&(c.setInterruptBuffer(new Int32Array(X)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":c.runningCellId&&m.addStdout(c.runningCellId,l);break;case"execute_result":c.runningCellId&&s&&m.setResult(c.runningCellId,s);break;case"execute_completed":c.executionCompleted();break;case"error":c.runningCellId&&m.setError(c.runningCellId,y),c.executionCompleted();break;case"fatal":c.setFatalError(y);break}}}),Ce(async()=>{console.log("PyodideProvider: Terminating worker."),c.setWorkerStatus("terminating"),o.terminate()}),G(()=>c.executionStatus,n=>{if(n==="queued"&&c.runningCellId!=null){const r=m.getSource(c.runningCellId);o.postMessage({type:"run",cellId:c.runningCellId,code:r==null?void 0:r.join("")})}}),(n,r)=>ve(n.$slots,"default")}}),St={class:"renderer-container"},wt=f({__name:"Renderer",props:{id:{},initialNotebook:{}},setup(a){const t=a;return T(()=>{const o=Ie();o.global.name.value=x.theme,m.loadNotebook(t.initialNotebook)}),G(()=>t.initialNotebook,o=>{m.loadNotebook(o)}),(o,n)=>(u(),g(xt,{notebookId:o.id},{default:d(()=>[q("div",St,[i(Z,null,{default:d(()=>[p(c).workerStatus=="initializing"?(u(),g(ee,{key:0,text:"The notebook is starting up...",type:"info",variant:"tonal",density:"compact"})):b("",!0)]),_:1}),i(Z,null,{default:d(()=>[p(c).workerStatus=="error"?(u(),g(ee,{key:0,text:`The notebook could not be started because of an error: ${p(c).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):b("",!0)]),_:1}),(u(!0),_(me,null,xe(p(m).content.cells,r=>(u(),_("div",null,[r.cell_type==="markdown"?(u(),g(p(Re),{key:0,source:r.source,metadata:r.metadata},null,8,["source","metadata"])):b("",!0),r.cell_type==="code"?(u(),g(p(vt),{key:1,cell:r},null,8,["cell"])):b("",!0)]))),256))])]),_:1},8,["notebookId"]))}}),Bt="test",$t=f({__name:"App",setup(a){const t=ge(null);return T(async()=>{try{const o=new URLSearchParams(window.location.search),n=o.has("sample")?o.get("sample"):"hello_world.ipynb";if(o.has("theme")){const s=o.get("theme")||"dark";x.setTheme(s)}if(o.has("locale")){const s=o.get("locale")||"en-US";x.setLocale(s)}const l=await(await fetch(`./samples/${n}`)).text();t.value=JSON.parse(l),console.log(`Notebook ${n} loaded`)}catch(o){console.error("Error loading notebook:",o)}}),(o,n)=>t.value?(u(),g(wt,{key:0,"initial-notebook":t.value,id:Bt},null,8,["initial-notebook"])):b("",!0)}}),It=Ne({icons:{defaultSet:"mdi",aliases:Pe,sets:{mdi:Te}}});Se($t).use(It).mount("#app");
