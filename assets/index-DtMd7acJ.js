import{r as B,f as m,M as f,N as a,O as d,m as l,P as E,Q as h,u as c,K as v,H as x,R as A,S as _,F as N,b as R,w as V,U as L,V as M,W as j,X as W}from"./@vue-BZK5WcBs.js";import{V as z,a as I,b as T,c as k,d as F,e as C,f as S,g as U,h as H,i as w,j as O,k as P,l as q,m as D,n as K}from"./vuetify-CpNx83Kt.js";import{v as J}from"./uuid-C6aID195.js";import{m as G}from"./marked-DK8KC6kv.js";import{z as y,E as Q,A as X}from"./@codemirror-C6laWxD4.js";import{b as Y}from"./codemirror-DTUGriku.js";import"./@lezer-BrmOjncj.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();const p=B({content:{},findCell(o){return this.content.cells?this.content.cells.find(t=>t.id===o):null},getSource(o){const t=this.findCell(o);return t?t.source:null},setSource(o,t){const e=this.findCell(o);e&&(t=t.map(n=>n+`
`),e.source=t)},clearOutputs(o){const t=this.findCell(o);t&&(t.outputs=[])},getOutputTypes(o){var n,r,s;let t=[];const e=this.findCell(o);return e&&(((n=e.outputs)==null?void 0:n.findIndex(i=>i.output_type==="execute_result"))!==-1&&t.push("result"),((r=e.outputs)==null?void 0:r.findIndex(i=>i.output_type==="stream"&&i.name==="stdout"))!==-1&&t.push("stdout"),((s=e.outputs)==null?void 0:s.findIndex(i=>i.output_type==="error"))!==-1&&t.push("error")),t},addStdout(o,t){const e=this.findCell(o);if(e){e.outputs||(e.outputs=[]);const n=e.outputs.findIndex(r=>r.output_type==="stream"&&r.name==="stdout");n!==-1?(e.outputs[n].text||(e.outputs[n].text=[]),e.outputs[n].text.push(t)):e.outputs.push({output_type:"stream",name:"stdout",text:[t]})}},getStdout(o){var n;let t="";const e=this.findCell(o);return e&&((n=e.outputs)==null||n.forEach(r=>{var s;r.output_type==="stream"&&(t+=((s=r.text)==null?void 0:s.join(""))||"")})),t},setResult(o,t){const e=this.findCell(o);if(e){e.outputs||(e.outputs=[]);const n=e.outputs.findIndex(r=>r.output_type==="execute_result");if(n!==-1){const r=e.outputs[n].data||{};e.outputs[n].data={...r,...t}}else e.outputs.push({output_type:"execute_result",data:t})}},getResult(o){var n;let t={};const e=this.findCell(o);return e&&((n=e.outputs)==null||n.forEach(r=>{r.output_type==="execute_result"&&r.data&&(t=r.data)})),t},setError(o,t){const e=this.findCell(o);if(e){e.outputs||(e.outputs=[]);const n=Array.isArray(t)?t:t.split(`
`);e.outputs.push({output_type:"error",traceback:n})}},getError(o){var n;let t="";const e=this.findCell(o);return e&&((n=e.outputs)==null||n.forEach(r=>{var s;r.output_type==="error"&&(t+=((s=r.traceback)==null?void 0:s.join(""))||"")})),t},loadNotebook(o){o.cells&&(o.cells.forEach(t=>{(!t.id||typeof t.id!="string"||t.id.trim()==="")&&(t.id=J())}),this.content=o)}}),Z=["innerHTML"],ee=m({__name:"MarkdownCell",props:{source:{}},setup(o){const t=e=>e?G.parse(e.join("")):"";return(e,n)=>(a(),f(z,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:d(()=>[l(I,null,{default:d(()=>[E("div",{innerHTML:t(e.source)},null,8,Z)]),_:1})]),_:1}))}}),u=B({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",setInterruptBuffer(o){this.interruptBuffer=o},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(o){this.workerStatus=o},executeCell(o){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=o,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(o){this.workerStatus="error",this.fatalErrorTrace=o}}),te=m({__name:"CodeControls",props:{id:{}},setup(o){const t=o,e=()=>{p.clearOutputs(t.id),u.executeCell(t.id)},n=()=>{p.clearOutputs(t.id)},r=()=>{u.interruptExecution()};return(s,i)=>(a(),h("div",null,[E("div",null,[l(T,{rounded:"lg"},{default:d(()=>[l(k,{size:"32",icon:"mdi-play-outline",onClick:e,disabled:c(u).executionStatus!=="idle"||c(u).workerStatus!=="ready",loading:c(u).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),l(k,{size:"32",icon:"mdi-stop",onClick:r,disabled:c(u).executionStatus==="idle"||c(u).runningCellId!==s.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),l(T,{rounded:"lg",class:"pl-4"},{default:d(()=>[l(k,{size:"32",icon:"mdi-broom",onClick:n})]),_:1})])]))}}),re=y.theme({"&":{fontSize:"10.5pt",border:"0px",borderRadius:"5px",background:"#ffffff"},".cm-content":{fontFamily:"JetBrainsMono, monospace",minHeight:"100px"},".cm-gutters":{minHeight:"100px"},".cm-scroller":{overflow:"auto",maxHeight:"600px"}}),oe=["id"],ne=m({__name:"CodeEditor",props:{source:{},id:{}},setup(o){const t=o;return v(()=>{var n;const e=Q.create({doc:(n=t.source)==null?void 0:n.join(""),extensions:[Y,X(),re,y.lineWrapping,y.updateListener.of(r=>{if(r.docChanged){const s=r.state.doc.toString();p.setSource(t.id,s.includes(`
`)?s.split(`
`):[s])}})]});new y({state:e,parent:document.getElementById("code-editor-"+t.id)})}),(e,n)=>(a(),h("div",{id:`code-editor-${t.id}`},null,8,oe))}}),se={class:"output-console",readonly:""},ue=m({__name:"Console",props:{stdout:{}},setup(o){return(t,e)=>(a(),h("textarea",se,x(t.stdout),1))}}),b=(o,t)=>{const e=o.__vccOpts||o;for(const[n,r]of t)e[n]=r;return e},le=b(ue,[["__scopeId","data-v-31a04b90"]]),ae={class:"output-console",readonly:""},ie=m({__name:"Error",props:{stderr:{}},setup(o){return(t,e)=>(a(),h("textarea",ae,x(t.stderr),1))}}),de=b(ie,[["__scopeId","data-v-21ca1749"]]),ce={class:"output-console",readonly:""},pe=m({__name:"TextPlain",props:{value:{}},setup(o){return(t,e)=>(a(),h("textarea",ce,x(Array.isArray(t.value)?t.value.join(""):t.value),1))}}),fe=b(pe,[["__scopeId","data-v-8ff1bdc7"]]),me=["src"],_e=m({__name:"ImagePng",props:{value:{}},setup(o){return(t,e)=>(a(),h("img",{src:`data:image/png;base64,${t.value}`},null,8,me))}}),he=["src"],ge=m({__name:"ImageSvg",props:{value:{}},setup(o){return(t,e)=>(a(),h("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t.value)}`},null,8,he))}}),ye=m({__name:"Result",props:{value:{}},setup(o){const t=o;return(e,n)=>(a(),h(N,null,[A(x(console.log(t.value))+" ",1),e.value["image/svg+xml"]?(a(),f(ge,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):_("",!0),e.value["image/png"]?(a(),f(_e,{key:1,value:e.value["image/png"]},null,8,["value"])):_("",!0),e.value["text/plain"]?(a(),f(fe,{key:2,value:e.value["text/plain"]},null,8,["value"])):_("",!0)],64))}}),ve=b(ye,[["__scopeId","data-v-2229fbd6"]]),xe=m({__name:"CodeCell",props:{cell:{}},setup(o){const t=o;let e=[];e=p.getOutputTypes(t.cell.id);const n=()=>{if(e.indexOf("result")!==-1)return"result";if(e.indexOf("stdout")!==-1)return"stdout";if(e.indexOf("error")!==-1)return"error"},r=R("result");return V(()=>t.cell.outputs,()=>{e=p.getOutputTypes(t.cell.id),r.value="none",r.value=n()||r.value},{deep:!0}),(s,i)=>(a(),f(z,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:d(()=>[l(I,null,{default:d(()=>[l(ne,{source:s.cell.source,id:s.cell.id},null,8,["source","id"])]),_:1}),l(U,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:d(()=>[l(te,{id:s.cell.id},null,8,["id"]),l(F,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=g=>r.value=g),class:"ml-auto"},{default:d(()=>[c(e).indexOf("result")!==-1?(a(),f(C,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:d(()=>[l(S,{icon:"mdi-monitor"})]),_:1})):_("",!0),c(e).indexOf("stdout")!==-1?(a(),f(C,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[l(S,{icon:"mdi-console"})]),_:1})):_("",!0),c(e).indexOf("error")!==-1?(a(),f(C,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[l(S,{icon:"mdi-alert-circle-outline"})]),_:1})):_("",!0)]),_:1},8,["modelValue"])]),_:1}),l(I,null,{default:d(()=>[l(H,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=g=>r.value=g),direction:"vertical"},{default:d(()=>[l(w,{value:"result"},{default:d(()=>[l(ve,{value:c(p).getResult(s.cell.id)},null,8,["value"])]),_:1}),l(w,{value:"stdout",direction:"vertical"},{default:d(()=>[l(le,{stdout:c(p).getStdout(s.cell.id)},null,8,["stdout"])]),_:1}),l(w,{value:"error",direction:"vertical"},{default:d(()=>[l(de,{stderr:c(p).getError(s.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),be=m({__name:"PyodideProvider",props:{notebookId:{}},setup(o){const t=o;let e;return v(async()=>{console.log("PyodideProvider: Starting new worker for "+t.notebookId),e=new Worker(new URL(""+new URL("PyodideWorker-CcsMhKFv.js",import.meta.url).href,import.meta.url),{type:"module"}),e.postMessage({type:"initialize"}),e.onmessage=async n=>{const{type:r,text:s,result:i,error:g,interruptBuffer:$}=n.data;switch(r){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),u.setWorkerStatus("ready"),$&&(u.setInterruptBuffer(new Int32Array($)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":u.runningCellId&&p.addStdout(u.runningCellId,s);break;case"execute_result":u.runningCellId&&i&&p.setResult(u.runningCellId,i);break;case"execute_completed":u.executionCompleted();break;case"error":u.runningCellId&&p.setError(u.runningCellId,g),u.executionCompleted();break;case"fatal":u.setFatalError(g);break}}}),L(async()=>{console.log("PyodideProvider: Terminating worker."),u.setWorkerStatus("terminating"),e.terminate()}),V(()=>u.executionStatus,n=>{if(n==="queued"&&u.runningCellId!=null){const r=p.getSource(u.runningCellId);e.postMessage({type:"run",cellId:u.runningCellId,code:r==null?void 0:r.join("")})}}),(n,r)=>M(n.$slots,"default")}}),ke={class:"renderer-container"},Ce=m({__name:"Renderer",props:{id:{},initialNotebook:{}},setup(o){const t=o;return v(()=>{p.loadNotebook(t.initialNotebook)}),V(()=>t.initialNotebook,e=>{p.loadNotebook(e)}),(e,n)=>(a(),f(be,{notebookId:e.id},{default:d(()=>[E("div",ke,[l(O,null,{default:d(()=>[c(u).workerStatus=="initializing"?(a(),f(P,{key:0,text:"The notebook is starting up...",type:"info",variant:"tonal",density:"compact"})):_("",!0)]),_:1}),l(O,null,{default:d(()=>[c(u).workerStatus=="error"?(a(),f(P,{key:0,text:`The notebook could not be started because of an error: ${c(u).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):_("",!0)]),_:1}),(a(!0),h(N,null,j(c(p).content.cells,r=>(a(),h("div",null,[r.cell_type==="markdown"?(a(),f(c(ee),{key:0,source:r.source},null,8,["source"])):_("",!0),r.cell_type==="code"?(a(),f(c(xe),{key:1,cell:r},null,8,["cell"])):_("",!0)]))),256))])]),_:1},8,["notebookId"]))}}),Se="test",we=m({__name:"App",setup(o){const t=R(null);return v(async()=>{try{const e=new URLSearchParams(window.location.search),n=e.has("sample")?e.get("sample"):"hello_world.ipynb",s=await(await fetch(`./samples/${n}`)).text();t.value=JSON.parse(s),console.log(`Notebook ${n} loaded`)}catch(e){console.error("Error loading notebook:",e)}}),(e,n)=>t.value?(a(),f(Ce,{key:0,"initial-notebook":t.value,id:Se},null,8,["initial-notebook"])):_("",!0)}}),Ie=q({icons:{defaultSet:"mdi",aliases:K,sets:{mdi:D}},theme:{defaultTheme:"light"}});W(we).use(Ie).mount("#app");
