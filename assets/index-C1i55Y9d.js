import{r as K,f,M as g,N as u,O as d,m as i,P as G,Q as _,u as p,K as B,b as P,w as E,H as J,R as h,F as ge,D as ve,G as Ce,S as xe,U as Se,V as we,W as Be}from"./@vue-CuCZ4c_x.js";import{V as fe,a as U,b as Z,c as L,d as $e,e as V,f as O,g as Ie,h as Ne,i as M,u as Te,j as ee,k as te,l as Pe,m as Ee,n as Le}from"./vuetify-BbVJR0j3.js";import{v as Ve}from"./uuid-C6aID195.js";import{m as Oe}from"./marked-DK8KC6kv.js";import{z as w,H as be,s as he,E as Me,A as Re}from"./@codemirror-8urbkqeF.js";import{b as We}from"./codemirror-B6RBFOHf.js";import{c as e}from"./@lezer-BrmOjncj.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();const x=K({theme:"dark",locale:"en-US",setTheme(a){this.theme=a},setLocale(a){this.locale=a}}),m=K({content:{},findCell(a){return this.content.cells?this.content.cells.find(o=>o.id===a):null},getSource(a){const o=this.findCell(a);return o?o.source:null},setSource(a,o){const t=this.findCell(a);t&&(o=o.map(n=>n+`
`),t.source=o)},clearOutputs(a){const o=this.findCell(a);o&&(o.outputs=[])},getOutputTypes(a){var n,r,l;let o=[];const t=this.findCell(a);return t&&(((n=t.outputs)==null?void 0:n.findIndex(s=>s.output_type==="execute_result"))!==-1&&o.push("result"),((r=t.outputs)==null?void 0:r.findIndex(s=>s.output_type==="stream"&&s.name==="stdout"))!==-1&&o.push("stdout"),((l=t.outputs)==null?void 0:l.findIndex(s=>s.output_type==="error"))!==-1&&o.push("error")),o},addStdout(a,o){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const n=t.outputs.findIndex(r=>r.output_type==="stream"&&r.name==="stdout");n!==-1?(t.outputs[n].text||(t.outputs[n].text=[]),t.outputs[n].text.push(o)):t.outputs.push({output_type:"stream",name:"stdout",text:[o]})}},getStdout(a){var n;let o="";const t=this.findCell(a);return t&&((n=t.outputs)==null||n.forEach(r=>{var l;r.output_type==="stream"&&(o+=((l=r.text)==null?void 0:l.join(""))||"")})),o},setResult(a,o){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const n=t.outputs.findIndex(r=>r.output_type==="execute_result");if(n!==-1){const r=t.outputs[n].data||{};t.outputs[n].data={...r,...o}}else t.outputs.push({output_type:"execute_result",data:o})}},getResult(a){var n;let o={};const t=this.findCell(a);return t&&((n=t.outputs)==null||n.forEach(r=>{r.output_type==="execute_result"&&r.data&&(o=r.data)})),o},setError(a,o){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const n=Array.isArray(o)?o:o.split(`
`);t.outputs.push({output_type:"error",traceback:n})}},getError(a){var n;let o="";const t=this.findCell(a);return t&&((n=t.outputs)==null||n.forEach(r=>{var l;r.output_type==="error"&&(o+=((l=r.traceback)==null?void 0:l.join(""))||"")})),o},loadNotebook(a){a.cells&&(a.cells.forEach(o=>{(!o.id||typeof o.id!="string"||o.id.trim()==="")&&(o.id=Ve())}),this.content=a)}}),Ae=["innerHTML"],De=f({__name:"MarkdownCell",props:{metadata:{},source:{}},setup(a){const o=n=>n?Oe.parse(n.join("")):"",t=(n,r)=>r.i18n&&r.i18n[x.locale]?r.i18n[x.locale]:n;return(n,r)=>(u(),g(fe,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:d(()=>[i(U,null,{default:d(()=>[G("div",{innerHTML:o(t(n.source,n.metadata))},null,8,Ae)]),_:1})]),_:1}))}}),c=K({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",setInterruptBuffer(a){this.interruptBuffer=a},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(a){this.workerStatus=a},executeCell(a){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=a,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(a){this.workerStatus="error",this.fatalErrorTrace=a}}),ze=f({__name:"CodeControls",props:{id:{}},setup(a){const o=a,t=()=>{m.clearOutputs(o.id),c.executeCell(o.id)},n=()=>{m.clearOutputs(o.id)},r=()=>{c.interruptExecution()};return(l,s)=>(u(),_("div",null,[G("div",null,[i(Z,{rounded:"lg"},{default:d(()=>[i(L,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:p(c).executionStatus!=="idle"||p(c).workerStatus!=="ready",loading:p(c).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),i(L,{size:"32",icon:"mdi-stop",onClick:r,disabled:p(c).executionStatus==="idle"||p(c).runningCellId!==l.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),i(Z,{rounded:"lg",class:"pl-4"},{default:d(()=>[i(L,{size:"32",icon:"mdi-broom",onClick:n})]),_:1})])]))}}),oe="#2e3440",_e="#3b4252",re="#434c5e",$="#4c566a",j="#e5e9f0",F="#eceff4",R="#8fbcbb",ae="#88c0d0",He="#81a1c1",b="#5e81ac",Ue="#bf616a",v="#d08770",W="#ebcb8b",ne="#a3be8c",je="#b48ead",le="#d30102",Q=F,A=Q,Fe="#ffffff",D=j,qe=Q,se=_e,Ke=w.theme({"&":{color:oe,backgroundColor:Fe},".cm-content":{caretColor:se,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:se},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:qe},".cm-panels":{backgroundColor:Q,color:$},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${$}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:j},".cm-activeLine":{backgroundColor:A},".cm-selectionMatch":{backgroundColor:j},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${$}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:F},".cm-gutters":{backgroundColor:F,color:oe,border:"none"},".cm-activeLineGutter":{backgroundColor:A},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:D},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:D,borderBottomColor:D},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:A,color:$}}},{dark:!1}),Ge=be.define([{tag:e.keyword,color:b},{tag:[e.name,e.deleted,e.character,e.propertyName,e.macroName],color:v},{tag:[e.variableName],color:v},{tag:[e.function(e.variableName)],color:b},{tag:[e.labelName],color:He},{tag:[e.color,e.constant(e.name),e.standard(e.name)],color:b},{tag:[e.definition(e.name),e.separator],color:ne},{tag:[e.brace],color:R},{tag:[e.annotation],color:le},{tag:[e.number,e.changed,e.annotation,e.modifier,e.self,e.namespace],color:ae},{tag:[e.typeName,e.className],color:W},{tag:[e.operator,e.operatorKeyword],color:ne},{tag:[e.tagName],color:je},{tag:[e.squareBracket],color:Ue},{tag:[e.angleBracket],color:v},{tag:[e.attributeName],color:W},{tag:[e.regexp],color:b},{tag:[e.quote],color:_e},{tag:[e.string],color:v},{tag:e.link,color:R,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[e.url,e.escape,e.special(e.string)],color:v},{tag:[e.meta],color:ae},{tag:[e.comment],color:re,fontStyle:"italic"},{tag:e.strong,fontWeight:"bold",color:b},{tag:e.emphasis,fontStyle:"italic",color:b},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.heading,fontWeight:"bold",color:b},{tag:e.special(e.heading1),fontWeight:"bold",color:b},{tag:e.heading1,fontWeight:"bold",color:b},{tag:[e.heading2,e.heading3,e.heading4],fontWeight:"bold",color:b},{tag:[e.heading5,e.heading6],color:b},{tag:[e.atom,e.bool,e.special(e.variableName)],color:v},{tag:[e.processingInstruction,e.inserted],color:R},{tag:[e.contentSeparator],color:W},{tag:e.invalid,color:re,borderBottom:`1px dotted ${le}`}]),Je=[Ke,he(Ge)],ke="#2e3235",ye="#505d64",q="#606f7a",T="#707d8b",Qe="#a0a4ae",N="#bdbdbd",Xe="#e0e0e0",Ye="#fdf6e3",C="#ff5f52",Ze="#ff6e40",et="#fa5788",y="#facf4e",ce="#ffad42",S="#56c8d8",tt="#7186f0",z="#cf6edf",ot="#6abf69",ie="#99d066",ue="#4ebaaa",de=C,pe="#202325",I="#414b46",rt=ke,H=ye,at=ye,me=Qe,nt=w.theme({"&":{color:N,backgroundColor:rt},".cm-content":{caretColor:me,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:me},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:at},".cm-panels":{backgroundColor:pe,color:T},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${y}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:I},".cm-activeLine":{backgroundColor:I},".cm-selectionMatch":{backgroundColor:pe,outline:`1px solid ${ue}`},"&.cm-focused .cm-matchingBracket":{color:Xe,outline:`1px solid ${ue}`},"&.cm-focused .cm-nonmatchingBracket":{color:C},".cm-gutters":{backgroundColor:ke,borderRight:"1px solid #4f5b66",color:q},".cm-activeLineGutter":{backgroundColor:I,color:Ye},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:H},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:H,borderBottomColor:H},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:I,color:T}}},{dark:!0}),lt=be.define([{tag:e.keyword,color:z},{tag:[e.name,e.deleted,e.character,e.macroName],color:S},{tag:[e.propertyName],color:y},{tag:[e.variableName],color:N},{tag:[e.function(e.variableName)],color:S},{tag:[e.labelName],color:z},{tag:[e.color,e.constant(e.name),e.standard(e.name)],color:y},{tag:[e.definition(e.name),e.separator],color:et},{tag:[e.brace],color:z},{tag:[e.annotation],color:de},{tag:[e.number,e.changed,e.annotation,e.modifier,e.self,e.namespace],color:ce},{tag:[e.typeName,e.className],color:ce},{tag:[e.operator,e.operatorKeyword],color:tt},{tag:[e.tagName],color:Ze},{tag:[e.squareBracket],color:C},{tag:[e.angleBracket],color:q},{tag:[e.attributeName],color:N},{tag:[e.regexp],color:de},{tag:[e.quote],color:ot},{tag:[e.string],color:ie},{tag:e.link,color:S,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[e.url,e.escape,e.special(e.string)],color:y},{tag:[e.meta],color:T},{tag:[e.comment],color:T,fontStyle:"italic"},{tag:e.monospace,color:N},{tag:e.strong,fontWeight:"bold",color:C},{tag:e.emphasis,fontStyle:"italic",color:ie},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.heading,fontWeight:"bold",color:y},{tag:e.heading1,fontWeight:"bold",color:y},{tag:[e.heading2,e.heading3,e.heading4],fontWeight:"bold",color:y},{tag:[e.heading5,e.heading6],color:y},{tag:[e.atom,e.bool,e.special(e.variableName)],color:S},{tag:[e.processingInstruction,e.inserted],color:C},{tag:[e.contentSeparator],color:S},{tag:e.invalid,color:q,borderBottom:`1px dotted ${C}`}]),st=[nt,he(lt)],ct=["id"],it=f({__name:"CodeEditor",props:{source:{},id:{}},setup(a){const o=a;return B(()=>{var r;let t=Je;switch(x.theme){case"dark":t=st;break}const n=Me.create({doc:(r=o.source)==null?void 0:r.join(""),extensions:[We,Re(),t,w.lineWrapping,w.updateListener.of(l=>{if(l.docChanged){const s=l.state.doc.toString();m.setSource(o.id,s.includes(`
`)?s.split(`
`):[s])}})]});new w({state:n,parent:document.getElementById("code-editor-"+o.id)})}),(t,n)=>(u(),_("div",{id:`code-editor-${o.id}`},null,8,ct))}}),ut=f({__name:"Console",props:{stdout:{}},setup(a){const o=a,t=P(null),n=()=>{if(!t.value)return;const k=`${(o.stdout?o.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=k};return E(()=>o.stdout,()=>{n()},{immediate:!0}),B(()=>{n()}),(r,l)=>(u(),_("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},J(r.stdout),513))}}),X=(a,o)=>{const t=a.__vccOpts||a;for(const[n,r]of o)t[n]=r;return t},dt=X(ut,[["__scopeId","data-v-a163ed39"]]),pt={class:"output-console",readonly:""},mt=f({__name:"Error",props:{stderr:{}},setup(a){return(o,t)=>(u(),_("textarea",pt,J(o.stderr),1))}}),gt=X(mt,[["__scopeId","data-v-21ca1749"]]),ft=f({__name:"TextPlain",props:{value:{}},setup(a){const o=P(null);return(t,n)=>(u(),_("textarea",{ref_key:"consoleRef",ref:o,class:"output-console",readonly:""},J(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),bt=X(ft,[["__scopeId","data-v-d08c6110"]]),ht=["src"],_t=f({__name:"ImagePng",props:{value:{}},setup(a){return(o,t)=>(u(),_("img",{src:`data:image/png;base64,${o.value}`},null,8,ht))}}),kt=["src"],yt=f({__name:"ImageSvg",props:{value:{}},setup(a){return(o,t)=>(u(),_("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(o.value)}`},null,8,kt))}}),vt=f({__name:"Result",props:{value:{}},setup(a){return(o,t)=>(u(),_(ge,null,[o.value["image/svg+xml"]?(u(),g(yt,{key:0,value:o.value["image/svg+xml"]},null,8,["value"])):h("",!0),o.value["image/png"]?(u(),g(_t,{key:1,value:o.value["image/png"]},null,8,["value"])):h("",!0),o.value["text/plain"]?(u(),g(bt,{key:2,value:o.value["text/plain"]},null,8,["value"])):h("",!0)],64))}}),Ct=f({__name:"CodeCell",props:{cell:{}},setup(a){const o=a;let t=[];t=m.getOutputTypes(o.cell.id);const n=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},r=P("result");return E(()=>o.cell.outputs,()=>{t=m.getOutputTypes(o.cell.id),r.value="none",r.value=n()||r.value},{deep:!0}),(l,s)=>(u(),g(fe,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:d(()=>[i(U,null,{default:d(()=>[i(it,{source:l.cell.source,id:l.cell.id},null,8,["source","id"])]),_:1}),i(Ie,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:d(()=>[i(ze,{id:l.cell.id},null,8,["id"]),i($e,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=k=>r.value=k),class:"ml-auto"},{default:d(()=>[p(t).indexOf("result")!==-1?(u(),g(V,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:d(()=>[i(O,{icon:"mdi-monitor"})]),_:1})):h("",!0),p(t).indexOf("stdout")!==-1?(u(),g(V,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(O,{icon:"mdi-console"})]),_:1})):h("",!0),p(t).indexOf("error")!==-1?(u(),g(V,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(O,{icon:"mdi-alert-circle-outline"})]),_:1})):h("",!0)]),_:1},8,["modelValue"])]),_:1}),ve(i(U,null,{default:d(()=>[i(Ne,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=k=>r.value=k),direction:"vertical"},{default:d(()=>[i(M,{value:"result"},{default:d(()=>[i(vt,{value:p(m).getResult(l.cell.id)},null,8,["value"])]),_:1}),i(M,{value:"stdout",direction:"vertical"},{default:d(()=>[i(dt,{stdout:p(m).getStdout(l.cell.id)},null,8,["stdout"])]),_:1}),i(M,{value:"error",direction:"vertical"},{default:d(()=>[i(gt,{stderr:p(m).getError(l.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[Ce,o.cell.outputs?o.cell.outputs.length>0:!1]])]),_:1}))}}),xt=f({__name:"PyodideProvider",props:{notebookId:{}},setup(a){const o=a;let t;return B(async()=>{console.log("PyodideProvider: Starting new worker for "+o.notebookId),t=new Worker(new URL(""+new URL("PyodideWorker-CcsMhKFv.js",import.meta.url).href,import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async n=>{const{type:r,text:l,result:s,error:k,interruptBuffer:Y}=n.data;switch(r){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),c.setWorkerStatus("ready"),Y&&(c.setInterruptBuffer(new Int32Array(Y)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":c.runningCellId&&m.addStdout(c.runningCellId,l);break;case"execute_result":c.runningCellId&&s&&m.setResult(c.runningCellId,s);break;case"execute_completed":c.executionCompleted();break;case"error":c.runningCellId&&m.setError(c.runningCellId,k),c.executionCompleted();break;case"fatal":c.setFatalError(k);break}}}),xe(async()=>{console.log("PyodideProvider: Terminating worker."),c.setWorkerStatus("terminating"),t.terminate()}),E(()=>c.executionStatus,n=>{if(n==="queued"&&c.runningCellId!=null){const r=m.getSource(c.runningCellId);t.postMessage({type:"run",cellId:c.runningCellId,code:r==null?void 0:r.join("")})}}),(n,r)=>Se(n.$slots,"default")}}),St={class:"renderer-container"},wt=f({__name:"Renderer",props:{id:{},initialNotebook:{}},setup(a){const o=a;return B(()=>{const t=Te();t.global.name.value=x.theme,m.loadNotebook(o.initialNotebook)}),E(()=>o.initialNotebook,t=>{m.loadNotebook(t)}),(t,n)=>(u(),g(xt,{notebookId:t.id},{default:d(()=>[G("div",St,[i(ee,null,{default:d(()=>[p(c).workerStatus=="initializing"?(u(),g(te,{key:0,text:"The notebook is starting up...",type:"info",variant:"tonal",density:"compact"})):h("",!0)]),_:1}),i(ee,null,{default:d(()=>[p(c).workerStatus=="error"?(u(),g(te,{key:0,text:`The notebook could not be started because of an error: ${p(c).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):h("",!0)]),_:1}),(u(!0),_(ge,null,we(p(m).content.cells,r=>(u(),_("div",null,[r.cell_type==="markdown"?(u(),g(p(De),{key:0,source:r.source,metadata:r.metadata},null,8,["source","metadata"])):h("",!0),r.cell_type==="code"?(u(),g(p(Ct),{key:1,cell:r},null,8,["cell"])):h("",!0)]))),256))])]),_:1},8,["notebookId"]))}}),Bt="test",$t=f({__name:"App",setup(a){const o=P(null);return B(async()=>{try{const t=new URLSearchParams(window.location.search),n=t.has("sample")?t.get("sample"):"hello_world.ipynb";if(t.has("theme")){const s=t.get("theme")||"dark";x.setTheme(s)}if(t.has("locale")){const s=t.get("locale")||"en-US";x.setLocale(s)}const l=await(await fetch(`./samples/${n}`)).text();o.value=JSON.parse(l),console.log(`Notebook ${n} loaded`)}catch(t){console.error("Error loading notebook:",t)}}),(t,n)=>o.value?(u(),g(wt,{key:0,"initial-notebook":o.value,id:Bt},null,8,["initial-notebook"])):h("",!0)}}),It=Pe({icons:{defaultSet:"mdi",aliases:Le,sets:{mdi:Ee}}});Be($t).use(It).mount("#app");
