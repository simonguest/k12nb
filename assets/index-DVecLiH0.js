import{r as j,f,M as g,N as u,O as d,m as i,P as H,Q as _,u as p,K as N,R as b,H as q,F as me,b as ge,w as K,S as Ce,U as ve,V as xe,W as Se}from"./@vue-CuCZ4c_x.js";import{V as fe,a as z,b as Y,c as T,d as we,e as E,f as P,g as Be,h as $e,i as V,u as Ie,j as Z,k as ee,l as Ne,m as Te,n as Ee}from"./vuetify-BbVJR0j3.js";import{v as Pe}from"./uuid-C6aID195.js";import{m as Ve}from"./marked-DK8KC6kv.js";import{z as S,H as be,s as he,E as Le,A as Oe}from"./@codemirror-8urbkqeF.js";import{b as Me}from"./codemirror-B6RBFOHf.js";import{c as e}from"./@lezer-BrmOjncj.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}})();const G=j({theme:"dark",setTheme(a){this.theme=a}}),m=j({content:{},findCell(a){return this.content.cells?this.content.cells.find(t=>t.id===a):null},getSource(a){const t=this.findCell(a);return t?t.source:null},setSource(a,t){const o=this.findCell(a);o&&(t=t.map(n=>n+`
`),o.source=t)},clearOutputs(a){const t=this.findCell(a);t&&(t.outputs=[])},getOutputTypes(a){var n,r,l;let t=[];const o=this.findCell(a);return o&&(((n=o.outputs)==null?void 0:n.findIndex(c=>c.output_type==="execute_result"))!==-1&&t.push("result"),((r=o.outputs)==null?void 0:r.findIndex(c=>c.output_type==="stream"&&c.name==="stdout"))!==-1&&t.push("stdout"),((l=o.outputs)==null?void 0:l.findIndex(c=>c.output_type==="error"))!==-1&&t.push("error")),t},addStdout(a,t){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const n=o.outputs.findIndex(r=>r.output_type==="stream"&&r.name==="stdout");n!==-1?(o.outputs[n].text||(o.outputs[n].text=[]),o.outputs[n].text.push(t)):o.outputs.push({output_type:"stream",name:"stdout",text:[t]})}},getStdout(a){var n;let t="";const o=this.findCell(a);return o&&((n=o.outputs)==null||n.forEach(r=>{var l;r.output_type==="stream"&&(t+=((l=r.text)==null?void 0:l.join(""))||"")})),t},setResult(a,t){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const n=o.outputs.findIndex(r=>r.output_type==="execute_result");if(n!==-1){const r=o.outputs[n].data||{};o.outputs[n].data={...r,...t}}else o.outputs.push({output_type:"execute_result",data:t})}},getResult(a){var n;let t={};const o=this.findCell(a);return o&&((n=o.outputs)==null||n.forEach(r=>{r.output_type==="execute_result"&&r.data&&(t=r.data)})),t},setError(a,t){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const n=Array.isArray(t)?t:t.split(`
`);o.outputs.push({output_type:"error",traceback:n})}},getError(a){var n;let t="";const o=this.findCell(a);return o&&((n=o.outputs)==null||n.forEach(r=>{var l;r.output_type==="error"&&(t+=((l=r.traceback)==null?void 0:l.join(""))||"")})),t},loadNotebook(a){a.cells&&(a.cells.forEach(t=>{(!t.id||typeof t.id!="string"||t.id.trim()==="")&&(t.id=Pe())}),this.content=a)}}),We=["innerHTML"],Re=f({__name:"MarkdownCell",props:{source:{}},setup(a){const t=o=>o?Ve.parse(o.join("")):"";return(o,n)=>(u(),g(fe,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:d(()=>[i(z,null,{default:d(()=>[H("div",{innerHTML:t(o.source)},null,8,We)]),_:1})]),_:1}))}}),s=j({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",setInterruptBuffer(a){this.interruptBuffer=a},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(a){this.workerStatus=a},executeCell(a){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=a,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(a){this.workerStatus="error",this.fatalErrorTrace=a}}),Ae=f({__name:"CodeControls",props:{id:{}},setup(a){const t=a,o=()=>{m.clearOutputs(t.id),s.executeCell(t.id)},n=()=>{m.clearOutputs(t.id)},r=()=>{s.interruptExecution()};return(l,c)=>(u(),_("div",null,[H("div",null,[i(Y,{rounded:"lg"},{default:d(()=>[i(T,{size:"32",icon:"mdi-play-outline",onClick:o,disabled:p(s).executionStatus!=="idle"||p(s).workerStatus!=="ready",loading:p(s).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),i(T,{size:"32",icon:"mdi-stop",onClick:r,disabled:p(s).executionStatus==="idle"||p(s).runningCellId!==l.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),i(Y,{rounded:"lg",class:"pl-4"},{default:d(()=>[i(T,{size:"32",icon:"mdi-broom",onClick:n})]),_:1})])]))}}),te="#2e3440",_e="#3b4252",oe="#434c5e",w="#4c566a",D="#e5e9f0",F="#eceff4",L="#8fbcbb",re="#88c0d0",ze="#81a1c1",h="#5e81ac",De="#bf616a",C="#d08770",O="#ebcb8b",ae="#a3be8c",Fe="#b48ead",ne="#d30102",J=F,M=J,Ue="#ffffff",W=D,je=J,le=_e,He=S.theme({"&":{color:te,backgroundColor:Ue},".cm-content":{caretColor:le,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:le},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:je},".cm-panels":{backgroundColor:J,color:w},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${w}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:D},".cm-activeLine":{backgroundColor:M},".cm-selectionMatch":{backgroundColor:D},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${w}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:F},".cm-gutters":{backgroundColor:F,color:te,border:"none"},".cm-activeLineGutter":{backgroundColor:M},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:W},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:W,borderBottomColor:W},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:M,color:w}}},{dark:!1}),qe=be.define([{tag:e.keyword,color:h},{tag:[e.name,e.deleted,e.character,e.propertyName,e.macroName],color:C},{tag:[e.variableName],color:C},{tag:[e.function(e.variableName)],color:h},{tag:[e.labelName],color:ze},{tag:[e.color,e.constant(e.name),e.standard(e.name)],color:h},{tag:[e.definition(e.name),e.separator],color:ae},{tag:[e.brace],color:L},{tag:[e.annotation],color:ne},{tag:[e.number,e.changed,e.annotation,e.modifier,e.self,e.namespace],color:re},{tag:[e.typeName,e.className],color:O},{tag:[e.operator,e.operatorKeyword],color:ae},{tag:[e.tagName],color:Fe},{tag:[e.squareBracket],color:De},{tag:[e.angleBracket],color:C},{tag:[e.attributeName],color:O},{tag:[e.regexp],color:h},{tag:[e.quote],color:_e},{tag:[e.string],color:C},{tag:e.link,color:L,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[e.url,e.escape,e.special(e.string)],color:C},{tag:[e.meta],color:re},{tag:[e.comment],color:oe,fontStyle:"italic"},{tag:e.strong,fontWeight:"bold",color:h},{tag:e.emphasis,fontStyle:"italic",color:h},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.heading,fontWeight:"bold",color:h},{tag:e.special(e.heading1),fontWeight:"bold",color:h},{tag:e.heading1,fontWeight:"bold",color:h},{tag:[e.heading2,e.heading3,e.heading4],fontWeight:"bold",color:h},{tag:[e.heading5,e.heading6],color:h},{tag:[e.atom,e.bool,e.special(e.variableName)],color:C},{tag:[e.processingInstruction,e.inserted],color:L},{tag:[e.contentSeparator],color:O},{tag:e.invalid,color:oe,borderBottom:`1px dotted ${ne}`}]),Ke=[He,he(qe)],ke="#2e3235",ye="#505d64",U="#606f7a",I="#707d8b",Ge="#a0a4ae",$="#bdbdbd",Je="#e0e0e0",Qe="#fdf6e3",v="#ff5f52",Xe="#ff6e40",Ye="#fa5788",k="#facf4e",se="#ffad42",x="#56c8d8",Ze="#7186f0",R="#cf6edf",et="#6abf69",ce="#99d066",ie="#4ebaaa",ue=v,de="#202325",B="#414b46",tt=ke,A=ye,ot=ye,pe=Ge,rt=S.theme({"&":{color:$,backgroundColor:tt},".cm-content":{caretColor:pe,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:pe},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ot},".cm-panels":{backgroundColor:de,color:I},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${k}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:B},".cm-activeLine":{backgroundColor:B},".cm-selectionMatch":{backgroundColor:de,outline:`1px solid ${ie}`},"&.cm-focused .cm-matchingBracket":{color:Je,outline:`1px solid ${ie}`},"&.cm-focused .cm-nonmatchingBracket":{color:v},".cm-gutters":{backgroundColor:ke,borderRight:"1px solid #4f5b66",color:U},".cm-activeLineGutter":{backgroundColor:B,color:Qe},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:A},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:A,borderBottomColor:A},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:B,color:I}}},{dark:!0}),at=be.define([{tag:e.keyword,color:R},{tag:[e.name,e.deleted,e.character,e.macroName],color:x},{tag:[e.propertyName],color:k},{tag:[e.variableName],color:$},{tag:[e.function(e.variableName)],color:x},{tag:[e.labelName],color:R},{tag:[e.color,e.constant(e.name),e.standard(e.name)],color:k},{tag:[e.definition(e.name),e.separator],color:Ye},{tag:[e.brace],color:R},{tag:[e.annotation],color:ue},{tag:[e.number,e.changed,e.annotation,e.modifier,e.self,e.namespace],color:se},{tag:[e.typeName,e.className],color:se},{tag:[e.operator,e.operatorKeyword],color:Ze},{tag:[e.tagName],color:Xe},{tag:[e.squareBracket],color:v},{tag:[e.angleBracket],color:U},{tag:[e.attributeName],color:$},{tag:[e.regexp],color:ue},{tag:[e.quote],color:et},{tag:[e.string],color:ce},{tag:e.link,color:x,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[e.url,e.escape,e.special(e.string)],color:k},{tag:[e.meta],color:I},{tag:[e.comment],color:I,fontStyle:"italic"},{tag:e.monospace,color:$},{tag:e.strong,fontWeight:"bold",color:v},{tag:e.emphasis,fontStyle:"italic",color:ce},{tag:e.strikethrough,textDecoration:"line-through"},{tag:e.heading,fontWeight:"bold",color:k},{tag:e.heading1,fontWeight:"bold",color:k},{tag:[e.heading2,e.heading3,e.heading4],fontWeight:"bold",color:k},{tag:[e.heading5,e.heading6],color:k},{tag:[e.atom,e.bool,e.special(e.variableName)],color:x},{tag:[e.processingInstruction,e.inserted],color:v},{tag:[e.contentSeparator],color:x},{tag:e.invalid,color:U,borderBottom:`1px dotted ${v}`}]),nt=[rt,he(at)],lt=["id"],st=f({__name:"CodeEditor",props:{source:{},id:{}},setup(a){const t=a;return N(()=>{var r;let o=Ke;switch(G.theme){case"dark":o=nt;break}const n=Le.create({doc:(r=t.source)==null?void 0:r.join(""),extensions:[Me,Oe(),o,S.lineWrapping,S.updateListener.of(l=>{if(l.docChanged){const c=l.state.doc.toString();m.setSource(t.id,c.includes(`
`)?c.split(`
`):[c])}})]});new S({state:n,parent:document.getElementById("code-editor-"+t.id)})}),(o,n)=>(u(),_("div",{id:`code-editor-${t.id}`},null,8,lt))}}),ct={key:0,class:"output-console",readonly:""},it=f({__name:"Console",props:{stdout:{}},setup(a){return(t,o)=>t.stdout?(u(),_("textarea",ct,q(t.stdout),1)):b("",!0)}}),Q=(a,t)=>{const o=a.__vccOpts||a;for(const[n,r]of t)o[n]=r;return o},ut=Q(it,[["__scopeId","data-v-d2c2f4ad"]]),dt={class:"output-console",readonly:""},pt=f({__name:"Error",props:{stderr:{}},setup(a){return(t,o)=>(u(),_("textarea",dt,q(t.stderr),1))}}),mt=Q(pt,[["__scopeId","data-v-21ca1749"]]),gt={class:"output-console",readonly:""},ft=f({__name:"TextPlain",props:{value:{}},setup(a){return(t,o)=>(u(),_("textarea",gt,q(Array.isArray(t.value)?t.value.join(""):t.value),1))}}),bt=Q(ft,[["__scopeId","data-v-cb10ff75"]]),ht=["src"],_t=f({__name:"ImagePng",props:{value:{}},setup(a){return(t,o)=>(u(),_("img",{src:`data:image/png;base64,${t.value}`},null,8,ht))}}),kt=["src"],yt=f({__name:"ImageSvg",props:{value:{}},setup(a){return(t,o)=>(u(),_("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t.value)}`},null,8,kt))}}),Ct=f({__name:"Result",props:{value:{}},setup(a){return(t,o)=>(u(),_(me,null,[t.value["image/svg+xml"]?(u(),g(yt,{key:0,value:t.value["image/svg+xml"]},null,8,["value"])):b("",!0),t.value["image/png"]?(u(),g(_t,{key:1,value:t.value["image/png"]},null,8,["value"])):b("",!0),t.value["text/plain"]?(u(),g(bt,{key:2,value:t.value["text/plain"]},null,8,["value"])):b("",!0)],64))}}),vt=f({__name:"CodeCell",props:{cell:{}},setup(a){const t=a;let o=[];o=m.getOutputTypes(t.cell.id);const n=()=>{if(o.indexOf("result")!==-1)return"result";if(o.indexOf("stdout")!==-1)return"stdout";if(o.indexOf("error")!==-1)return"error"},r=ge("result");return K(()=>t.cell.outputs,()=>{o=m.getOutputTypes(t.cell.id),r.value="none",r.value=n()||r.value},{deep:!0}),(l,c)=>(u(),g(fe,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:d(()=>[i(z,null,{default:d(()=>[i(st,{source:l.cell.source,id:l.cell.id},null,8,["source","id"])]),_:1}),i(Be,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:d(()=>[i(Ae,{id:l.cell.id},null,8,["id"]),i(we,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=y=>r.value=y),class:"ml-auto"},{default:d(()=>[p(o).indexOf("result")!==-1?(u(),g(E,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:d(()=>[i(P,{icon:"mdi-monitor"})]),_:1})):b("",!0),p(o).indexOf("stdout")!==-1?(u(),g(E,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(P,{icon:"mdi-console"})]),_:1})):b("",!0),p(o).indexOf("error")!==-1?(u(),g(E,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(P,{icon:"mdi-alert-circle-outline"})]),_:1})):b("",!0)]),_:1},8,["modelValue"])]),_:1}),i(z,null,{default:d(()=>[i($e,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=y=>r.value=y),direction:"vertical"},{default:d(()=>[i(V,{value:"result"},{default:d(()=>[i(Ct,{value:p(m).getResult(l.cell.id)},null,8,["value"])]),_:1}),i(V,{value:"stdout",direction:"vertical"},{default:d(()=>[i(ut,{stdout:p(m).getStdout(l.cell.id)},null,8,["stdout"])]),_:1}),i(V,{value:"error",direction:"vertical"},{default:d(()=>[i(mt,{stderr:p(m).getError(l.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),xt=f({__name:"PyodideProvider",props:{notebookId:{}},setup(a){const t=a;let o;return N(async()=>{console.log("PyodideProvider: Starting new worker for "+t.notebookId),o=new Worker(new URL(""+new URL("PyodideWorker-CcsMhKFv.js",import.meta.url).href,import.meta.url),{type:"module"}),o.postMessage({type:"initialize"}),o.onmessage=async n=>{const{type:r,text:l,result:c,error:y,interruptBuffer:X}=n.data;switch(r){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),s.setWorkerStatus("ready"),X&&(s.setInterruptBuffer(new Int32Array(X)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":s.runningCellId&&m.addStdout(s.runningCellId,l);break;case"execute_result":s.runningCellId&&c&&m.setResult(s.runningCellId,c);break;case"execute_completed":s.executionCompleted();break;case"error":s.runningCellId&&m.setError(s.runningCellId,y),s.executionCompleted();break;case"fatal":s.setFatalError(y);break}}}),Ce(async()=>{console.log("PyodideProvider: Terminating worker."),s.setWorkerStatus("terminating"),o.terminate()}),K(()=>s.executionStatus,n=>{if(n==="queued"&&s.runningCellId!=null){const r=m.getSource(s.runningCellId);o.postMessage({type:"run",cellId:s.runningCellId,code:r==null?void 0:r.join("")})}}),(n,r)=>ve(n.$slots,"default")}}),St={class:"renderer-container"},wt=f({__name:"Renderer",props:{id:{},initialNotebook:{}},setup(a){const t=a;return N(()=>{const o=Ie();o.global.name.value=G.theme,m.loadNotebook(t.initialNotebook)}),K(()=>t.initialNotebook,o=>{m.loadNotebook(o)}),(o,n)=>(u(),g(xt,{notebookId:o.id},{default:d(()=>[H("div",St,[i(Z,null,{default:d(()=>[p(s).workerStatus=="initializing"?(u(),g(ee,{key:0,text:"The notebook is starting up...",type:"info",variant:"tonal",density:"compact"})):b("",!0)]),_:1}),i(Z,null,{default:d(()=>[p(s).workerStatus=="error"?(u(),g(ee,{key:0,text:`The notebook could not be started because of an error: ${p(s).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):b("",!0)]),_:1}),(u(!0),_(me,null,xe(p(m).content.cells,r=>(u(),_("div",null,[r.cell_type==="markdown"?(u(),g(p(Re),{key:0,source:r.source},null,8,["source"])):b("",!0),r.cell_type==="code"?(u(),g(p(vt),{key:1,cell:r},null,8,["cell"])):b("",!0)]))),256))])]),_:1},8,["notebookId"]))}}),Bt="test",$t=f({__name:"App",setup(a){const t=ge(null);return N(async()=>{try{const o=new URLSearchParams(window.location.search),n=o.has("sample")?o.get("sample"):"hello_world.ipynb";if(o.has("theme")){const c=o.get("theme")||"dark";G.setTheme(c)}const l=await(await fetch(`./samples/${n}`)).text();t.value=JSON.parse(l),console.log(`Notebook ${n} loaded`)}catch(o){console.error("Error loading notebook:",o)}}),(o,n)=>t.value?(u(),g(wt,{key:0,"initial-notebook":t.value,id:Bt},null,8,["initial-notebook"])):b("",!0)}}),It=Ne({icons:{defaultSet:"mdi",aliases:Ee,sets:{mdi:Te}}});Se($t).use(It).mount("#app");
